(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{20:function(t,e,n){},21:function(t,e,n){},22:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(1),s=n.n(a),i=n(11),o=n.n(i),c=n(2),l={noOfBombs:10,rows:9,cols:8,secPerMinute:60,gameStates:["init","action","defeat","victory"],gameStateMsg:{init:"",action:"",defeat:"YOU LOST",victory:"YOU WIN"},audioPath:"./sounds/",imgPath:"./images/",stylePath:"./styles/"};n(20);var d=function(t){var e=t.marked,n=String(e).padStart(3,"0").split("").map((function(t,e){var n="d"+e;return Object(r.jsx)("span",{className:n,children:t},n)})).concat();return Object(r.jsx)("div",{className:"flagsCounter",children:n})};n(21);var u=function(t){return Object(r.jsx)("button",{type:"button",className:"resetBtn",onClick:t.myResetBtnClickHandler,children:"New"})};n(22);var h=function(t){var e=t.timeElapsed;return Object(r.jsxs)("div",{className:"timer",children:[Math.floor(e/l.secPerMinute),Object(r.jsx)("span",{children:":"}),String(e%l.secPerMinute).padStart(2,"0")]})};n(23);var f=function(t){return Object(r.jsxs)("header",{className:"ControlPanel",children:[Object(r.jsx)(d,{marked:t.marked}),Object(r.jsx)(u,{myResetBtnClickHandler:t.myResetBtnClickHandler}),Object(r.jsx)(h,{timeElapsed:t.timeElapsed})]})},m=n(9),b=n(3),v=["closed","open","marked"],g=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"closed";Object(b.a)(this,t),this.bomb=!!e,this.state=v.includes(n)?n:"closed",this.bombsAround=0},I=n.p+"static/media/bomb1.dab46aa2.svg",j=n.p+"static/media/boom1.4d436099.svg",O=(n(24),function(t){var e=Number(t.r),n=Number(t.c),a=t.cellObj,s=t.myCellClickHandler,i="",o="",c=Object(r.jsx)("img",{src:I,className:"bomb-img",alt:"bomb","data-r":e,"data-c":n}),l=Object(r.jsx)("img",{src:j,className:"boom-img",alt:"boom","data-r":e,"data-c":n}),d=Object(r.jsx)("p",{"data-r":e,"data-c":n,children:a.bombsAround.toString()});"marked"===a.state?(i=c,o="marked"):"open"===a.state&&a.bomb?(i=l,o="open boom"):"open"!==a.state||a.bomb?(i="",o="closed"):(i=0===a.bombsAround?"":d,o="open empty");var u="cell "+o;return Object(r.jsx)("div",{className:u,"data-r":e,"data-c":n,onClick:s,onContextMenu:s,children:i})});n(25);var w=function(t){var e=t.r,n=Object(m.a)(Array(l.cols).keys()).map((function(n){var a=n.toString();return Object(r.jsx)(O,{r:e,c:a,cellObj:t.cellRow[n],myCellClickHandler:t.myCellClickHandler},"r"+e+"c"+a)}));return Object(r.jsx)("div",{className:"Row",r:e,children:n})};n(26);var y=function(t){var e=Object(m.a)(Array(l.rows).keys()),n=t.gameState,a=l.gameStateMsg[n],s=e.map((function(e){var n=e.toString();return Object(r.jsx)(w,{r:n,cellRow:t.cellArr[e],myCellClickHandler:t.myCellClickHandler},"r"+n)})),i="victory"===n?"msg win":"defeat"===n?"msg lost":"msg",o=a?Object(r.jsx)("p",{className:i,children:a}):"";return Object(r.jsxs)("main",{className:"Field",children:[s,o]})},p=n(6),C=n(12),N=n(14),k=n(13),R=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,r,a){var s;if(Object(b.a)(this,n),void 0===(this instanceof n?this.constructor:void 0))throw new Error("FieldClass constructor: not called using the 'new' operator as it should be.");return n.checkNoOfBombsParam(a),(s=e.call(this,t,r,g,!1,"closed")).noOfBombs=a,s.fillWithBombs(a),s.calculateBombsAroundAllCells(),s}return Object(p.a)(n,[{key:"resetField",value:function(){this.arr=this.initArr(g,!1,"closed"),this.fillWithBombs(this.noOfBombs),this.calculateBombsAroundAllCells()}},{key:"countBombs",value:function(){if(!this.arr)return 0;for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.cols;n++)!0===this.arr[e][n].bomb&&t++;return t}},{key:"fillWithBombs",value:function(t){if(!this.arr||!Number.isSafeInteger(t))return!1;if(t<1||t>this.rows*this.cols)return!1;for(;this.countBombs()<t;){var e=Math.floor(Math.random()*this.rows),n=Math.floor(Math.random()*this.cols);this.arr[e][n].bomb=!0}return!0}},{key:"countBombsAround",value:function(t,e){var n=this;if(!this.arr)return 0;if(!this.isRowColInRange(t,e))return 0;var r=this.adjacency8IndexesList(t,e,!1);return r&&0!==r.length?r.filter((function(t){var e=Object(c.a)(t,2),r=e[0],a=e[1];return n.arr[r][a].bomb})).length:0}},{key:"calculateBombsAroundAllCells",value:function(){if(this.arr)for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.arr[t][e].bombsAround=this.countBombsAround(t,e)}},{key:"isWinConditionSatisfied",value:function(){if(!this.arr)return!1;var t=0;return this.arr.forEach((function(e){e.forEach((function(e){e&&e.bomb&&"marked"===e.state&&t++}))})),t===l.noOfBombs}},{key:"revealRemainingCells",value:function(){if(!this.arr)return!1;this.arr.forEach((function(t){t.forEach((function(t){!t||t.bomb&&"marked"===t.state||(t.state="open")}))}))}},{key:"revealAdjacentEmptyCells",value:function(t,e){var n=this;if(!this.arr)return 0;if(!this.isRowColInRange(t,e))return 0;if(!this.arr[t][e]||0===!this.arr[t][e].bombsAround)return 0;var r=[[t,e]],a=0;do{var s=Object(c.a)(r[a],2),i=s[0],o=s[1];this.adjacency4IndexesList(i,o,!1).forEach((function(t){var e=Object(c.a)(t,2),a=e[0],s=e[1];0===n.arr[a][s].bombsAround&&n.addIfNotIncluded(r,t)}))}while(++a<r.length);r.forEach((function(t){var e=Object(c.a)(t,2),r=e[0],a=e[1];n.arr[r][a].state="open"}));var l=[];return r.forEach((function(t){var e=Object(c.a)(t,2),r=e[0],a=e[1];n.adjacency8IndexesList(r,a,!1).forEach((function(t){var e=Object(c.a)(t,2),r=e[0],a=e[1];"open"!==n.arr[r][a].state&&(l.push(t),n.arr[r][a].state="open")}))})),r.length+l.length}}],[{key:"checkNoOfBombsParam",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FieldClass constructor: ";if(!Number.isSafeInteger(t))throw new TypeError("".concat(e,"'noOfBombs' should be non-negative integer value."));if(t<0)throw new RangeError("".concat(e,"'noOfBombs' should be non-negative integer value."));return!0}}]),n}(function(){function t(e,n,r){if(Object(b.a)(this,t),void 0===(this instanceof t?this.constructor:void 0))throw new Error("Arr2dClass constructor: not called using the 'new' operator as it should be.");t.checkRowsColsParams(e,n),t.checkElementClassParam(r),this.rows=e,this.cols=n;for(var a=arguments.length,s=new Array(a>3?a-3:0),i=3;i<a;i++)s[i-3]=arguments[i];this.arr=this.initArr.apply(this,[r].concat(s))}return Object(p.a)(t,[{key:"initArr",value:function(e){for(var n=this,r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return t.checkElementClassParam(e),new Array(this.rows).fill().map((function(t,r){return Array(n.cols).fill().map((function(t,n){return e?Object(k.a)(e,a):{}}))}))}},{key:"isRowInRange",value:function(t){return!!Number.isSafeInteger(t)&&!(t<0||t>=this.rows)}},{key:"isColInRange",value:function(t){return!!Number.isSafeInteger(t)&&!(t<0||t>=this.cols)}},{key:"isRowColInRange",value:function(t,e){return this.isRowInRange(t)&&this.isColInRange(e)}},{key:"addIfNotIncluded",value:function(t,e){if(!t||!e)return 0;if(!Array.isArray(t))return 0;var n=JSON.stringify(e);return JSON.stringify(t).includes(n)||t.push(JSON.parse(n)),t.length}},{key:"adjacency4IndexesList",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isRowColInRange(t,e))return[];if(1===this.rows&&1===this.cols)return[];var r=[[t,e]];return this.isRowInRange(t-1)?this.addIfNotIncluded(r,[t-1,e]):n&&this.addIfNotIncluded(r,[this.rows-1,e]),this.isRowInRange(t+1)?this.addIfNotIncluded(r,[t+1,e]):n&&this.addIfNotIncluded(r,[0,e]),this.isColInRange(e-1)?this.addIfNotIncluded(r,[t,e-1]):n&&this.addIfNotIncluded(r,[t,this.cols-1]),this.isColInRange(e+1)?this.addIfNotIncluded(r,[t,e+1]):n&&this.addIfNotIncluded(r,[t,0]),r.shift(),r.sort()}},{key:"adjacency8IndexesList",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isRowInRange(t)||!this.isColInRange(e))return[];if(1===this.rows&&1===this.cols)return[];var r=this.adjacency4IndexesList(t,e,n);return r.unshift([t,e]),this.isRowInRange(t-1)?(this.isColInRange(e-1)?this.addIfNotIncluded(r,[t-1,e-1]):n&&this.addIfNotIncluded(r,[t-1,this.cols-1]),this.isColInRange(e+1)?this.addIfNotIncluded(r,[t-1,e+1]):n&&this.addIfNotIncluded(r,[t-1,0])):n&&(this.isColInRange(e-1)?this.addIfNotIncluded(r,[this.rows-1,e-1]):this.addIfNotIncluded(r,[this.rows-1,this.cols-1]),this.isColInRange(e+1)?this.addIfNotIncluded(r,[this.rows-1,e+1]):this.addIfNotIncluded(r,[this.rows-1,0])),this.isRowInRange(t+1)?(this.isColInRange(e-1)?this.addIfNotIncluded(r,[t+1,e-1]):n&&this.addIfNotIncluded(r,[t+1,this.cols-1]),this.isColInRange(e+1)?this.addIfNotIncluded(r,[t+1,e+1]):n&&this.addIfNotIncluded(r,[t+1,0])):n&&(this.isColInRange(e-1)?this.addIfNotIncluded(r,[0,e-1]):this.addIfNotIncluded(r,[0,this.cols-1]),this.isColInRange(e+1)?this.addIfNotIncluded(r,[0,e+1]):this.addIfNotIncluded(r,[0,0])),r.shift(),r.sort()}}],[{key:"checkRowsColsParams",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Arr2dClass constructor: ";if(!Number.isSafeInteger(t)||!Number.isSafeInteger(e))throw new TypeError("".concat(n,"You have to provide 2 positive integer arguments to create new Arr2dClass object."));if(t<=0||e<=0)throw new RangeError("".concat(n,"You have to provide 2 positive integer arguments to create new Arr2dClass object."));return!0}},{key:"checkElementClassParam",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Arr2dClass constructor: ";if(t&&"function"!==typeof t)throw new TypeError("".concat(e,"the third argument, when provided, should be the Arr2dClass element class name."));return!0}}]),t}()),A=n.p+"static/media/bomb.50cb791f.svg";n(27);var S=function(){return Object(r.jsxs)("footer",{className:"logoArea",children:[Object(r.jsxs)("p",{children:["\xa0\xa0\xa0M I N E",Object(r.jsx)("br",{}),"SWEEPER"]}),Object(r.jsx)("img",{src:A,className:"appLogo",alt:"logo"})]})},x=(n(28),new R(l.rows,l.cols,l.noOfBombs)),E=null,B=function(){var t=Object(a.useState)("init"),e=Object(c.a)(t,2),n=e[0],s=e[1],i=Object(a.useState)(0),o=Object(c.a)(i,2),l=o[0],d=o[1],u=Object(a.useState)(0),h=Object(c.a)(u,2),m=h[0],b=h[1],v=JSON.stringify(x.arr),g=Object(a.useState)(JSON.parse(v)),I=Object(c.a)(g,2),j=I[0],O=I[1];Object(a.useEffect)((function(){return"init"===n?(x.resetField(),d(0),b(0),O(JSON.parse(JSON.stringify(x.arr))),E&&(clearInterval(E),E=null)):"action"===n?E=setInterval(w,1e3):"defeat"===n?E&&(clearInterval(E),E=null):"victory"===n&&E&&(clearInterval(E),E=null),function(){E&&(clearInterval(E),E=null)}}),[n]);var w=function(){b((function(t){return t+1}))};return Object(r.jsxs)("div",{className:"minesweepergame",onContextMenu:function(t){return t.preventDefault()},children:[Object(r.jsx)(f,{marked:l,timeElapsed:m,myResetBtnClickHandler:function(t){1!==t.which&&0!==t.button||s("init")}}),Object(r.jsx)(y,{cellArr:j,gameState:n,myCellClickHandler:function(t){var e=Number(t.target.dataset.r),r=Number(t.target.dataset.c),a=!1;"init"!==n&&"action"!==n||("init"===n&&s("action"),1!==t.which&&0!==t.button||"open"!==x.arr[e][r].state&&("marked"===x.arr[e][r].state&&d(l-1),x.arr[e][r].state="open",x.arr[e][r].bomb?(x.revealRemainingCells(),s("defeat")):0===x.arr[e][r].bombsAround&&x.revealAdjacentEmptyCells(e,r),a=!0),3!==t.which&&2!==t.button||("closed"===j[e][r].state?(x.arr[e][r].state="marked",d(l+1),x.isWinConditionSatisfied()&&(x.revealRemainingCells(),s("victory")),a=!0):"marked"===j[e][r].state&&(x.arr[e][r].state="closed",d(l-1),x.isWinConditionSatisfied()&&(x.revealRemainingCells(),s("victory")),a=!0))),a&&O(JSON.parse(JSON.stringify(x.arr)))}}),Object(r.jsx)(S,{})]})};n(29);o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(B,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.88b260d8.chunk.js.map